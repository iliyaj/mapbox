<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8' />
  <title>Display a popup on click</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.css' rel='stylesheet' />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }

    #fly {
      display: block;
      position: relative;
      margin: 0px auto;
      width: 10%;
      height: 40px;
      padding: 10px;
      border: none;
      border-radius: 3px;
      font-size: 12px;
      text-align: center;
      color: #fff;
      background: #acacac;
    }

    @media only screen and (max-width: 765px) {
      #fly {
        display: block;
        position: relative;
        margin: 10px auto;
        width: 30%;
        height: 50px;
        padding: 20px;
        border: none;
        border-radius: 3px;
        font-size: 12px;
        text-align: center;
        color: #fff;
        background: #acacac;
      }
  </style>
</head>

<body>

  <style>
    .mapboxgl-popup {
      max-width: 400px;
      font: 12px/20px 'Open Sans', Arial, Helvetica, sans-serif;
    }
  </style>
  <div id='map'></div>
  <br />
  <button id='fly'>Fly</button>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoicG93ZXJiaXBybzEiLCJhIjoiY2p4d3NqdjlxMGo3aDNtczUwcXppZmI0NiJ9.y1TQSJbi5ckc3U9kYdYkcw';

    var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/powerbipro1/cjnxurm8l0iv92sstjeysbo8b',
      center: [133.533513, -19.66861],
      zoom: 3.5
    });

    map.on('load', function() {
      // Add a layer showing the places.
      map.addLayer({
        "id": "places",
        "type": "symbol",
        "source": {
          "type": "geojson",
          "data": {
            "type": "FeatureCollection",
            "features": [{
              "type": "Feature",
              "properties": {
                "description": "<p><strong>Susie Bryden</strong></p><p><strong>Studio Director / NSW:</strong></p><p>Level 2, 37 Pitt Street Sydney NSW 2000</p><p>(02) 9562 9700</p><p><a href=\"tel:(02)95629700\">CLICK TO CALL</a></p><p>ðŸ“§<a href=\"mailto:susiebriden@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [151.208986, -33.862533]
              }
            }, {
              "type": "Feature",
              "properties": {
                "description": "<p><strong>Chris Page</strong></p><p><strong>Regional Director VIC / TAS/ NZ:</strong></p><p>Level 7, 460 Bourke Street Melbourne VIC 3000</p><p>(03) 9604 5400</p><p><a href=\"tel:(03)96045400\">CLICK TO CALL</a></p><p>ðŸ“§ <a href=\"mailto:chrispage@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [144.960083, -37.814960]
              }
            }, {
              "type": "Feature",
              "properties": {
                "description": "<p><strong>Tegan Dobbie</strong></p><p><strong>Regional Director SA / NT:</strong></p><p>Level 6, 2 King William Street Adelaide SA 5000</p><p>(08) 7201 3000</p><a href=\"tel:(08)72013000\">CLICK TO CALL</a></p><p>ðŸ“§ <a href=\"mailto:tegandobbie@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [138.599690, -34.921768]
              }
            }, {
              "type": "Feature",
              "properties": {
                "description": "<p><strong>John Healy</strong></p><p><strong>Regional Director QLD:</strong></p><p>Level 2, 100 Creek Street Brisbane QLD 4000</p><p>(07) 3225 7290</p><p><a href=\"tel:(07)32257290\">CLICK TO CALL</a></p><p>ðŸ“§ <a href=\"mailto:johnhealy@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [153.027910, -27.466576]
              }
            }, {
              "type": "Feature",
              "properties": {
                "description": "<p><strong>Marcelo Solar </strong></p><p><strong>Regional Director ACT:</strong></p><p>Level 4, 10 Moore Street, Canberra City 2600</p><p>(02) 6113 1000</p><p><a href=\"tel:(02)61131000\">CLICK TO CALL</a></p><p>ðŸ“§ <a href=\"mailto:marcelosolar@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [149.128352, -35.277482]
              }
            }, {
              "type": "Feature",
              "properties": {
                "description": "<p><strong>Nick O'Hara</strong></p><p><strong>Regional Director WA / ASIA:</strong></p><p>Level 1, 5 Mill Street Perth WA 6000</p><p>(08) 9213 2333</p><p><a href=\"tel:(08)92132333\">CLICK TO CALL</a></p><p>ðŸ“§ <a href=\"mailto:nickohara@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [115.852301, -31.954387]
              }
            }, {
              "type": "Feature",
              "properties": {
                "description": "<p><strong>Nick O'Hara</strong></p><p><strong>Regional Director WA / ASIA:</strong></p><p>Level 1, 5 Mill Street Perth WA 6000</p><p>(08) 9213 2333</p><p><a href=\"tel:(08)92132333\">CLICK TO CALL</a></p><p>ðŸ“§ <a href=\"mailto:nickohara@iagroup.com.au\">Send Email</a></p>",
                "icon": "marker"
              },
              "geometry": {
                "type": "Point",
                "coordinates": [103.85049, 1.28178]
              }
            }]
          }
        },
        "layout": {
          "icon-image": "{icon}-15",
          "icon-allow-overlap": true
        }
      });

      // When a click event occurs on a feature in the places layer, open a popup at the
      // location of the feature, with description HTML from its properties.
      map.on('click', 'places', function(e) {
        var coordinates = e.features[0].geometry.coordinates.slice();
        var description = e.features[0].properties.description;

        // Ensure that if the map is zoomed out such that multiple
        // copies of the feature are visible, the popup appears
        // over the copy being pointed to.
        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
          coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
        }

        new mapboxgl.Popup()
          .setLngLat(coordinates)
          .setHTML(description)
          .addTo(map);
      });

      // Change the cursor to a pointer when the mouse is over the places layer.
      map.on('mouseenter', 'places', function() {
        map.getCanvas().style.cursor = 'pointer';
      });

      // Change it back to a pointer when it leaves.
      map.on('mouseleave', 'places', function() {
        map.getCanvas().style.cursor = '';
      });
    });


    // This variable will track your current coordinate array's index.
    var idx = 0;

    var arrayOfCoordinates = [
      [151.208986, -33.862533],
      [144.960083, -37.814960],
      [138.599690, -34.921768],
      [153.027910, -27.466576],
      [149.128352, -35.277482],
      [115.852301, -31.954387],
      [103.85049, 1.28178]
    ];

    document.getElementById('fly').addEventListener('click', function() {
      // Back to the first coordinate.
      if (idx >= arrayOfCoordinates.length) {
        idx = 0;
      }

      map.flyTo({
        center: arrayOfCoordinates[idx],
        zoom: 12
      });

      idx++;
    });
  </script>

</body>

</html>
